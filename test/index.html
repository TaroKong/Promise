<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise 测试</title>
    <script src="../src/Promise.js"></script>
</head>
<body>
<script>
    /*Promise(function ( resolve, reject ) {
        reject( 'fail' );
    }).then(function ( val ) {
        console.log( val );
    });*/

    function p( name, isResolved ) {
        isResolved = isResolved || false;

        return new Promise(function (resolve, reject) {
            setTimeout(function () {
                isResolved ? resolve( name ) : reject( name );
            }, 3000);

        });
    }
    var p1 = p('p1', false);
//    var p2 = p1.catch(function () {},function (name) {console.log(name + '2');return name;});
//    var p3 = p2.then(function (name) {console.log(name+'3');return name + '3'}).then(function (name) {
//        console.log(name + '3_1');
//    });
    //var p2_1 = p(p1, false);
    var p2 = p(p1, false).then(function (val) {
        console.log( val + '1' );
        //return p1;
    }).catch(function (val) {
        console.log( val + '2342' );
        //return p1;
    });

</script>
</body>
</html>